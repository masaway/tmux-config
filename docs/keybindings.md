# tmux キーバインド一覧

## 基本情報

- **プレフィックスキー**: `Ctrl+s`
- **設定ファイル**: `~/.tmux.conf`
- **ヘルプ表示**: `Ctrl+s /`

## セッション管理

### コマンドライン操作

| コマンド | 動作 |
|----------|------|
| `tmux new-session -s <名前>` | 新しいセッションを作成 |
| `tmux list-sessions` | セッション一覧を表示 |
| `tmux attach-session -t <名前>` | セッションにアタッチ |
| `tmux detach-session` | セッションからデタッチ |
| `tmux kill-session -t <名前>` | セッションを削除 |
| `tmux rename-session -t <古い名前> <新しい名前>` | セッション名を変更 |

### キーバインド

| キー | 動作 |
|------|------|
| `Ctrl+s d` | セッションからデタッチ |
| `Ctrl+s $` | セッション名を変更 |
| `Ctrl+s s` | セッション選択画面を表示 |
| `Ctrl+s (` | 前のセッションに移動 |
| `Ctrl+s )` | 次のセッションに移動 |

## ウィンドウ管理

| キー | 動作 |
|------|------|
| `Ctrl+s c` | 新しいウィンドウを作成 |
| `Ctrl+s w` | ウィンドウ一覧を表示 |
| `Ctrl+s 0-9` | 番号でウィンドウを選択 |
| `Ctrl+s n` | 次のウィンドウに移動 |
| `Ctrl+s p` | 前のウィンドウに移動 |
| `Ctrl+s l` | 最後にアクティブだったウィンドウに移動 |
| `Ctrl+s ,` | ウィンドウ名を変更 |
| `Ctrl+s &` | ウィンドウを削除（確認あり） |
| `Ctrl+s f` | ウィンドウ名で検索 |

## ペイン管理

### ペインの作成・削除

| キー | 動作 |
|------|------|
| `Ctrl+s \` | ペインを水平分割（右に新しいペイン） |
| `Ctrl+s -` | ペインを垂直分割（下に新しいペイン） |
| `Ctrl+s x` | ペインを削除（確認あり） |
| `Ctrl+s !` | ペインを新しいウィンドウに分離 |

### ペイン間の移動（Vim風）

| キー | 動作 |
|------|------|
| `Ctrl+s h` | 左のペインに移動 |
| `Ctrl+s j` | 下のペインに移動 |
| `Ctrl+s k` | 上のペインに移動 |
| `Ctrl+s l` | 右のペインに移動 |
| `Ctrl+s ;` | 最後にアクティブだったペインに移動 |
| `Ctrl+s o` | 次のペインに移動 |

### ペインのリサイズ（Vim風）

| キー | 動作 |
|------|------|
| `Ctrl+s H` | ペインを左に5つ分拡大 |
| `Ctrl+s J` | ペインを下に5つ分拡大 |
| `Ctrl+s K` | ペインを上に5つ分拡大 |
| `Ctrl+s L` | ペインを右に5つ分拡大 |

### ペインの操作

| キー | 動作 |
|------|------|
| `Ctrl+s z` | ペインを最大化/元に戻す |
| `Ctrl+s q` | ペイン番号を表示 |
| `Ctrl+s {` | ペインを左に移動 |
| `Ctrl+s }` | ペインを右に移動 |
| `Ctrl+s Ctrl+o` | ペインを時計回りに回転 |
| `Ctrl+s Alt+o` | ペインを反時計回りに回転 |

## コピーモード

| キー | 動作 |
|------|------|
| `Ctrl+s [` | コピーモードに入る |
| `Space` | 選択開始 |
| `Enter` | 選択をコピー |
| `Ctrl+s ]` | ペースト |
| `q` | コピーモードを終了 |
| `Ctrl+s =` | バッファ一覧を表示 |

### コピーモード内での移動

| キー | 動作 |
|------|------|
| `h/j/k/l` | カーソル移動（Vim風） |
| `w` | 単語単位で前進 |
| `b` | 単語単位で後退 |
| `0` | 行の先頭 |
| `$` | 行の末尾 |
| `g` | バッファの先頭 |
| `G` | バッファの末尾 |
| `Ctrl+u` | 半画面上にスクロール |
| `Ctrl+d` | 半画面下にスクロール |
| `/` | 検索 |
| `n` | 次の検索結果 |
| `N` | 前の検索結果 |

## レイアウト

| キー | 動作 |
|------|------|
| `Ctrl+s Space` | 次のレイアウトに変更 |
| `Ctrl+s Alt+1` | even-horizontal |
| `Ctrl+s Alt+2` | even-vertical |
| `Ctrl+s Alt+3` | main-horizontal |
| `Ctrl+s Alt+4` | main-vertical |
| `Ctrl+s Alt+5` | tiled |

## システム・設定

| キー | 動作 |
|------|------|
| `Ctrl+s ?` | キーバインド一覧を表示 |
| `Ctrl+s r` | 設定ファイルをリロード |
| `Ctrl+s :` | コマンドモードに入る |
| `Ctrl+s t` | 時刻を表示 |
| `Ctrl+s ~` | 最近のメッセージを表示 |
| `Ctrl+s /` | チートシートを表示（カスタム） |
| `Ctrl+s R` | 全セッションで.zshrcを再読み込み |
| `Ctrl+s Ctrl+l` | 画面クリア＋履歴クリア |

## マウス操作

このリポジトリの設定では、マウス操作が有効になっています。

### 基本操作

| 操作 | 動作 |
|------|------|
| ペインをクリック | ペインをアクティブに |
| ペインの境界線をドラッグ | ペインサイズを調整 |
| ウィンドウタブをクリック | ウィンドウを選択 |
| 右クリック | コンテキストメニュー |

### コピー・ペースト操作

| 操作 | 動作 |
|------|------|
| マウスドラッグ | テキスト選択・コピー |
| 中クリック | ペースト |
| マウスホイール | スクロール |

### 特殊操作

| 操作 | 動作 |
|------|------|
| ダブルクリック | タイルレイアウトに変更 |

## よく使用するコマンド組み合わせ

### 開発環境のセットアップ

```bash
# 新しいセッションを作成
tmux new-session -s development

# 3ペインレイアウトを作成
# 1. メインのエディタ（左）
# 2. サーバー実行（右上）
# 3. Git操作（右下）

Ctrl+s \     # 水平分割
Ctrl+s j     # 下のペインに移動
Ctrl+s -     # 垂直分割
Ctrl+s k     # 上のペインに移動
```

### 便利なワークフロー

| 操作 | 動作 |
|------|------|
| `Ctrl+s c`, `Ctrl+s ,` | 新しいウィンドウを作成して名前を変更 |
| `Ctrl+s \`, `Ctrl+s j` | 水平分割して下のペインに移動 |
| `Ctrl+s z`, `<作業>`, `Ctrl+s z` | ペインを最大化して作業、元に戻す |
| `Ctrl+s [`, `<選択>`, `Enter`, `Ctrl+s ]` | コピー&ペースト |

## 高度な操作

### 同期入力

```bash
# 現在のウィンドウの全ペインに同じ入力を送る
Ctrl+s : setw synchronize-panes on

# 同期を解除
Ctrl+s : setw synchronize-panes off
```

### ペインの監視

```bash
# アクティビティ監視をオン/オフ
Ctrl+s m

# 現在のペインのコマンド実行を監視
Ctrl+s : set monitor-activity on
```

### カスタムコマンド

```bash
# 特定のディレクトリで新しいウィンドウを作成
Ctrl+s : new-window -c /path/to/directory

# 現在のペインでコマンドを実行
Ctrl+s : send-keys 'ls -la' Enter

# 新しいペインで特定のコマンドを実行
Ctrl+s : split-window -h 'tail -f /var/log/syslog'
```

## トラブルシューティング

### キーバインドが効かない場合

1. プレフィックスキーが正しく設定されているか確認
   ```bash
   tmux show-options -g prefix
   ```

2. 設定ファイルをリロード
   ```bash
   Ctrl+s r
   ```

3. tmuxサーバーを再起動
   ```bash
   tmux kill-server
   tmux new-session
   ```

### マウス操作が効かない場合

1. マウスが有効になっているか確認
   ```bash
   tmux show-options -g mouse
   ```

2. ターミナルがマウスをサポートしているか確認

### 文字化けする場合

```bash
# UTF-8設定を確認
echo $LANG
echo $LC_ALL

# tmuxの文字エンコーディングを確認
tmux show-options -g default-terminal
```

### 文字入力で問題が発生する場合

文字入力時に表示の問題が発生する場合は、以下の設定を確認してください：

```bash
# 入力の応答性を向上
set -sg escape-time 10

# 画面再描画の頻度を調整
set -g status-interval 5

# 文字エンコーディングの設定
set -g default-terminal "tmux-256color"
set -ga terminal-overrides ",*:RGB"
```

## 参考資料

- [tmux公式マニュアル](https://man.openbsd.org/tmux)
- [tmux Cheat Sheet](https://tmuxcheatsheet.com/)
- [この設定のチートシート](~/.tmux-cheatsheet.txt)